<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RailOptima - AI Enhanced Train Traffic Control System</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸš‚ RailOptima - AI Enhanced Train Traffic Control System</h1>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>Connecting...</span>
      </div>
    </div>

    <div class="main-content">
      <!-- Track Section -->
      <div class="track-section">
        <div class="section-header">
          <h2 class="section-title">Section: Mumbai Central - Borivali</h2>
          <select id="viewMode">
            <option value="normal">Normal View</option>
            <option value="optimized">Optimized View</option>
          </select>
        </div>

        <div class="track-visualization" id="trackViz">
          <!-- Main Track Line -->
          <div class="track-line main-track"></div>
          <!-- Secondary Track Line -->
          <div class="track-line secondary"></div>

          <!-- Track Junctions -->
          <div class="track-junction" id="junction1" style="left: 25%; top: 45%;" onclick="toggleJunction('junction1')">J1</div>
          <div class="track-junction" id="junction2" style="left: 50%; top: 45%;" onclick="toggleJunction('junction2')">J2</div>
          <div class="track-junction" id="junction3" style="left: 75%; top: 45%;" onclick="toggleJunction('junction3')">J3</div>

          <!-- Stations -->
          <div class="station" style="left: 5%; top: 35%;">Mumbai<br>Central</div>
          <div class="station" style="left: 30%; top: 35%;">Dadar</div>
          <div class="station" style="left: 55%; top: 35%;">Bandra</div>
          <div class="station" style="left: 80%; top: 35%;">Borivali</div>

          <!-- Signals -->
          <div class="signal" style="left: 20%; top: 42%;">
            <div class="signal-light red" id="signal1"></div>
            <div class="signal-light"></div>
            <div class="signal-light"></div>
          </div>
          <div class="signal" style="left: 45%; top: 42%;">
            <div class="signal-light"></div>
            <div class="signal-light yellow" id="signal2"></div>
            <div class="signal-light"></div>
          </div>
          <div class="signal" style="left: 70%; top: 42%;">
            <div class="signal-light"></div>
            <div class="signal-light"></div>
            <div class="signal-light green" id="signal3"></div>
          </div>
        </div>

        <!-- Optimization Result -->
        <div class="optimization-result" id="optimizationResult">
          <div class="result-header">âœ… AI Optimization Complete!</div>
          <div class="result-item">â€¢ Reduced average delay by <strong>35%</strong></div>
          <div class="result-item">â€¢ Improved throughput by <strong>28%</strong></div>
          <div class="result-item">â€¢ Resolved <strong>3 conflicts</strong></div>
          <div class="result-item">â€¢ Optimized 2 track changes automatically</div>
        </div>
      </div>

      <!-- Control Panel -->
      <div class="control-panel">
        <!-- AI Control Panel -->
        <div class="ai-control-panel">
          <h3>ðŸ¤– AI Track Management <div class="ai-indicator" id="aiIndicator"></div></h3>
          
          <div class="btn-group">
            <button class="btn btn-primary" onclick="enableAIMode()">ðŸ§  Enable AI Mode</button>
            <button class="btn btn-success" onclick="runAIOptimization()">ðŸš€ AI Optimize</button>
            <button class="btn btn-warning" onclick="emergencyOverride()">âš¡ Emergency Override</button>
            <button class="btn btn-secondary" onclick="manualMode()">ðŸ‘¤ Manual Mode</button>
          </div>

          <div class="ai-decision-log" id="aiDecisionLog">
            <div class="ai-log-item">
              <span class="ai-log-timestamp">[00:00:00]</span> AI System initializing...
            </div>
          </div>
        </div>

        <div class="metrics-panel">
          <h3>Real-Time Metrics</h3>
          <div class="metric-item"><span class="metric-label">Active Trains</span><span class="metric-value" id="activeTrains">5</span></div>
          <div class="metric-item"><span class="metric-label">Avg Delay</span><span class="metric-value warning" id="avgDelay">12 min</span></div>
          <div class="metric-item"><span class="metric-label">Throughput</span><span class="metric-value good" id="throughput">85%</span></div>
          <div class="metric-item"><span class="metric-label">Conflicts</span><span class="metric-value bad" id="conflicts">2</span></div>
          <div class="metric-item"><span class="metric-label">AI Decisions</span><span class="metric-value good" id="aiDecisions">0</span></div>
        </div>

        <div class="train-list">
          <h3>Train Schedule</h3>
          <div class="train-item" onclick="selectTrain('EXP-001')">
            <div class="train-info">
              <span class="train-id">EXP-001</span>
              <span class="train-status">Mumbai Rajdhani</span>
            </div>
            <span class="priority-badge priority-high">HIGH</span>
          </div>
          <div class="train-item" onclick="selectTrain('PAS-102')">
            <div class="train-info">
              <span class="train-id">PAS-102</span>
              <span class="train-status">Local Passenger</span>
            </div>
            <span class="priority-badge priority-medium">MEDIUM</span>
          </div>
          <div class="train-item" onclick="selectTrain('FRT-203')">
            <div class="train-info">
              <span class="train-id">FRT-203</span>
              <span class="train-status">Freight Cargo</span>
            </div>
            <span class="priority-badge priority-low">LOW</span>
          </div>
          <div class="train-item" onclick="selectTrain('EXP-002')">
            <div class="train-info">
              <span class="train-id">EXP-002</span>
              <span class="train-status">Shatabdi Express</span>
            </div>
            <span class="priority-badge priority-high">HIGH</span>
          </div>
          <div class="train-item" onclick="selectTrain('PAS-103')">
            <div class="train-info">
              <span class="train-id">PAS-103</span>
              <span class="train-status">Suburban Local</span>
            </div>
            <span class="priority-badge priority-medium">MEDIUM</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading & Alert -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
  </div>
  <div class="alert" id="alert"></div>

  <!-- Load JavaScript -->
  <script src="frontend/script.js"></script>
</body>
</html>